/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/main/webapp/js/index.js":
/*!*************************************!*\
  !*** ./src/main/webapp/js/index.js ***!
  \*************************************/
/***/ (() => {

eval("var table = null;\nvar tableAgg = null;\n$.noConflict();\njQuery(document).ready(function ($) {\n  $.ajax({\n    type: 'POST',\n    url: 'ProductLoader',\n    dataType: 'json',\n    success: function success(response) {\n      if (response == \"Server Error\") {\n        alert(\"Server or Data Error!\");\n      } else {\n        populate_select(response);\n        create_table($, response);\n      }\n    }\n  });\n  $('#minW').on('change keydown paste input', function () {\n    check_values();\n  });\n  $('#maxW').on('change keydown paste input', function () {\n    check_values();\n  });\n  $('#minP').on('change keydown paste input', function () {\n    check_values();\n  });\n  $('#maxP').on('change keydown paste input', function () {\n    check_values();\n  });\n  $('#btnApply').on('click', function () {\n    compute_query();\n  });\n  $('#insertProductBtn').on('click', function () {\n    insert_product();\n    $(\"#newPname\").val(\"\");\n    $(\"#newPcategory\").val(\"\");\n    $(\"#newPprice\").val(\"\");\n    $(\"#newPweight\").val(\"\");\n    $(\"#newPdescription\").val(\"\");\n    $(\"#newPtechnicalDetails\").val(\"\");\n    $(\"#newPProductUrl\").val(\"\");\n    $(\"#newPProductimage\").val(\"\");\n  });\n  $('#editProductBtn').on('click', function () {\n    edit_product();\n  });\n  $(\"#weightAVG,#priceAVG\").on('click', function () {\n    var value = $(this).val();\n    aggregate_function(value);\n  });\n  $(\"#tableAggBody\").hide();\n  $(\"#tablePrBody\").show();\n});\n\nfunction create_table($, data) {\n  if (tableAgg == null) {\n    tableAgg = $('#tableAggregate').DataTable({\n      scrollX: true,\n      scrollY: 500,\n      scrollCollapse: true,\n      \"searching\": false\n    });\n  }\n\n  if (table == null) {\n    table = $('#tableProducts').DataTable({\n      scrollX: true,\n      scrollY: 500,\n      scrollCollapse: true,\n      \"searching\": false\n    });\n  }\n\n  if (data.Products.length == 0) {\n    table.clear().draw();\n  } else {\n    table.clear();\n\n    for (var i = 0; i < data.Products.length; i++) {\n      var d = data.Products[i];\n      var dataRow = [d['Product Name'], d['Category'], \"&euro; \" + d['Selling Price'], d['Shipping Weight'].toString() + \" kg\", \"<div id= \\\"btnProduct\\\">\" + \"<button type=\\\"button\\\" class=\\\"infoButton btn btn-primary\\\" value = \" + d['_id'] + \" data-toggle=\\\"modal\\\" data-target=\\\"#infoProduct\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"currentColor\\\" class=\\\"bi bi-info-circle\\\" viewBox=\\\"0 0 16 16\\\">\\n\" + \"  <path d=\\\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\\\"/>\\n\" + \"  <path d=\\\"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\\\"/>\\n\" + \"</svg></button>\" + \"<button type=\\\"button\\\" class=\\\"editButton btn btn-primary\\\" value = \" + d['_id'] + \" data-toggle=\\\"modal\\\" data-target=\\\"#editProduct\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"currentColor\\\" class=\\\"bi bi-pencil-square\\\" viewBox=\\\"0 0 16 16\\\">\\n\" + \"  <path d=\\\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\\\"/>\\n\" + \"  <path fill-rule=\\\"evenodd\\\" d=\\\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\\\"/>\\n\" + \"</svg></button>\" + \"<button type=\\\"button\\\" class=\\\"deleteButton btn btn-primary\\\" value = \" + d['_id'] + \"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"currentColor\\\" class=\\\"bi bi-x-circle\\\" viewBox=\\\"0 0 16 16\\\">\\n\" + \"  <path d=\\\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\\\"/>\\n\" + \"  <path d=\\\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\\\"/>\\n\" + \"</svg></button>\" + \"</div>\"];\n      table.row.add(dataRow).draw();\n    }\n\n    $('.editButton').on('click', function () {\n      $(\"#editPName\").val(\"\");\n      $(\"#editPcategory\").val(\"\");\n      $(\"#editPprice\").val(\"\");\n      $(\"#editPweight\").val(\"\");\n      $(\"#editPdescription\").val(\"\");\n      $(\"#editPtechnicalDetails\").val(\"\");\n      $(\"#editPProductUrl\").val(\"\");\n      $(\"#editPProductimage\").val(\"\");\n      var value = $(this).val();\n      $.ajax({\n        type: 'POST',\n        url: 'ProductQuery',\n        dataType: 'json',\n        data: {\n          \"flag\": 2,\n          \"idProduct\": value\n        },\n        success: function success(response) {\n          if (response == \"Server Error\") {\n            alert(\"Obtaining information Failed, Server or Data Error!\");\n          } else {\n            populate_edit_product(response);\n          }\n        }\n      });\n    });\n    $('.infoButton').on('click', function () {\n      $('#infoPName').val(\"\");\n      $('#infoPDescription').val(\"\");\n      $('#infoPtechnicalDetails').val(\"\");\n      $('#infoPProductUrl').attr('href', \"\");\n      $('#infoPImage').attr('src', \"\");\n      var value = $(this).val();\n      $.ajax({\n        type: 'POST',\n        url: 'ProductQuery',\n        dataType: 'json',\n        data: {\n          \"flag\": 2,\n          \"idProduct\": value\n        },\n        success: function success(response) {\n          if (response == \"Server Error\") {\n            alert(\"Obtaining information Failed, Server or Data Error!\");\n          } else {\n            populate_info_product(response);\n          }\n        }\n      });\n    });\n    $('.deleteButton').on('click', function () {\n      var value = $(this).val();\n      $.ajax({\n        type: 'POST',\n        url: 'ProductQuery',\n        dataType: 'json',\n        data: {\n          \"flag\": 3,\n          \"idProduct\": value\n        },\n        success: function success(response) {\n          if (response == \"Server Error\") {\n            alert(\"Delete Failed, Server or Data Error!\");\n          } else {\n            populate_select(response);\n            create_table($, response);\n          }\n        }\n      });\n    });\n  }\n}\n\nfunction compute_query() {\n  var productName = $(\"#productName\").val();\n  var selectedVal = $(\"#categorySelect option:selected\").val();\n  var minPrice = parseFloat($(\"#minP\").val());\n  var maxPrice = parseFloat($(\"#maxP\").val());\n  var minWeight = parseFloat($(\"#minW\").val());\n  var maxWeight = parseFloat($(\"#maxW\").val());\n\n  if (productName === \"\") {\n    productName = null;\n  }\n\n  if (minPrice === maxPrice === 0) {\n    minPrice = null;\n    maxPrice = null;\n  } else if (minWeight === maxWeight === 0) {\n    minWeight = null;\n    maxWeight = null;\n  }\n\n  $.ajax({\n    type: 'POST',\n    url: 'ProductQuery',\n    dataType: 'json',\n    data: {\n      \"flag\": 0,\n      \"productName\": productName,\n      \"selectedValue\": selectedVal,\n      \"minPrice\": minPrice,\n      \"maxPrice\": maxPrice,\n      \"minWeight\": minWeight,\n      \"maxWeight\": maxWeight\n    },\n    success: function success(response) {\n      if (response == \"Server Error\") {\n        alert(\"Server Error!\");\n      } else {\n        create_table($, response);\n      }\n    }\n  });\n}\n\nfunction insert_product() {\n  var productName = $(\"#newPname\").val();\n  var category = $(\"#newPcategory\").val();\n  var price = parseFloat($(\"#newPprice\").val());\n  var weight = parseFloat($(\"#newPweight\").val());\n  var aboutProd = $(\"#newPdescription\").val();\n  var techDetails = $(\"#newPtechnicalDetails\").val();\n  var productUrl = $(\"#newPProductUrl\").val();\n  var imageUrl = $(\"#newPProductimage\").val();\n\n  if (productName != \"\" && category != \"\" && price != \"\" && weight != \"\" && aboutProd != \"\" && techDetails != \"\" && productUrl != \"\") {\n    $.ajax({\n      type: 'POST',\n      url: 'ProductQuery',\n      dataType: 'json',\n      data: {\n        \"flag\": 1,\n        \"productName\": productName,\n        \"category\": category,\n        \"price\": price,\n        \"weight\": weight,\n        \"aboutProd\": aboutProd,\n        \"techDet\": techDetails,\n        \"productUrl\": productUrl,\n        \"imageUrl\": imageUrl\n      },\n      success: function success(response) {\n        if (response == \"Server Error\") {\n          alert(\"Insertion Failed, Server or Data Error!\");\n        } else {\n          alert(\"Insertion Successful!\");\n          populate_select(response);\n          create_table($, response);\n        }\n      }\n    });\n  }\n}\n\nfunction check_values() {\n  var minPrice = parseFloat($(\"#minP\").val());\n  var maxPrice = parseFloat($(\"#maxP\").val());\n  var minWeight = parseFloat($(\"#minW\").val());\n  var maxWeight = parseFloat($(\"#maxW\").val());\n  var checkPrices = true;\n  var checkWeight = true;\n\n  if (minPrice > maxPrice) {\n    checkPrices = false;\n  }\n\n  if (minWeight > maxWeight) {\n    checkWeight = false;\n  }\n\n  if (checkWeight || checkPrices) {\n    $('#btnApply').prop(\"disabled\", false);\n  } else {\n    $('#btnApply').prop(\"disabled\", true);\n  }\n}\n\nfunction populate_select(data) {\n  categories = [];\n\n  for (var i = 0; i < data.Products.length; i++) {\n    category = data.Products[i]['Category'];\n\n    if (!categories.includes(category)) {\n      categories.push(category);\n    }\n  }\n\n  var select = document.getElementById(\"categorySelect\");\n  $('#categorySelect').empty();\n  var option = document.createElement('option');\n  option.setAttribute('value', \"null\");\n  option.appendChild(document.createTextNode(\"Default select\"));\n  select.appendChild(option);\n  categories.sort();\n\n  for (var i = 0; i < categories.length; i++) {\n    var option = document.createElement('option');\n    option.setAttribute('value', categories[i]);\n    option.appendChild(document.createTextNode(categories[i]));\n    select.appendChild(option);\n  }\n}\n\nfunction populate_info_product(data) {\n  var d = data.Product[0];\n  $('#infoPName').val(d['Product Name']);\n  $('#infoPDescription').val(d['About Product']);\n  $('#infoPtechnicalDetails').val(d['Technical Details']);\n  $('#infoPProductUrl').attr('href', d['Product Url']);\n  $('#infoPImage').attr('src', d['Image']);\n}\n\nfunction populate_edit_product(data) {\n  var d = data.Product[0];\n  $(\"#editPName\").val(d['Product Name']);\n  $(\"#editPcategory\").val(d['Category']);\n  $(\"#editPprice\").val(d['Selling Price']);\n  $(\"#editPweight\").val(d['Shipping Weight']);\n  $(\"#editPdescription\").val(d['About Product']);\n  $(\"#editPtechnicalDetails\").val(d['Technical Details']);\n  $(\"#editPProductUrl\").val(d['Product Url']);\n  $(\"#editPProductimage\").val(d['Image']);\n  $(\"#objectIdEdit\").val(d['_id']);\n}\n\nfunction edit_product() {\n  var newName = $(\"#editPName\").val();\n  var newCategory = $(\"#editPcategory\").val();\n  var newPrice = $(\"#editPprice\").val();\n  var newWeight = $(\"#editPweight\").val();\n  var newDesc = $(\"#editPdescription\").val();\n  var newTech = $(\"#editPtechnicalDetails\").val();\n  var newUrl = $(\"#editPProductUrl\").val();\n  var newImage = $(\"#editPProductimage\").val();\n  var objectID = $(\"#objectIdEdit\").val();\n  $.ajax({\n    type: 'POST',\n    url: 'ProductQuery',\n    dataType: 'json',\n    data: {\n      \"flag\": 4,\n      \"productID\": objectID,\n      \"productName\": newName,\n      \"category\": newCategory,\n      \"price\": newPrice,\n      \"weight\": newWeight,\n      \"aboutProd\": newDesc,\n      \"techDet\": newTech,\n      \"productUrl\": newUrl,\n      \"imageUrl\": newImage\n    },\n    success: function success(response) {\n      if (response == \"Server Error\") {\n        alert(\"Update Failed, Server or Data Error!\");\n      } else {\n        alert(\"Update Successful!\");\n        populate_select(response);\n        create_table($, response);\n      }\n    }\n  });\n}\n\nfunction aggregate_function(valBtn) {\n  $.ajax({\n    type: 'POST',\n    url: 'ProductQuery',\n    dataType: 'json',\n    data: {\n      \"flag\": 5,\n      \"aggregateType\": valBtn\n    },\n    success: function success(response) {\n      if (response == \"Type Error\" || response == \"Server Error\") {\n        alert(\"Aggregate Failed, Server or Type Error!\");\n      } else {\n        crate_aggregate_table($, response, valBtn);\n        $('#btnApply').prop(\"disabled\", true);\n        $('#resetAggregate').on('click', function () {\n          tableAgg.clear().draw();\n          $(\"#tableAggBody\").hide();\n          $(\"#tablePrBody\").show();\n          $('#btnApply').prop(\"disabled\", false);\n        });\n      }\n    }\n  });\n}\n\nfunction crate_aggregate_table($, data, valBtn) {\n  tableAgg.clear();\n\n  for (var i = 0; i < data.Aggregates.length; i++) {\n    var d = data.Aggregates[i];\n    var dataRow;\n\n    if (valBtn == 'weight') {\n      dataRow = [d['_id'], d['Average'].toFixed(2) + ' kg'];\n    } else {\n      dataRow = [d['_id'], \"&euro; \" + d['Average'].toFixed(2)];\n    }\n\n    tableAgg.row.add(dataRow).draw();\n  }\n\n  $(\"#tableAggBody\").show();\n  $(\"#tablePrBody\").hide();\n}\n\n//# sourceURL=webpack:///./src/main/webapp/js/index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/main/webapp/js/index.js"]();
/******/ 	
/******/ })()
;